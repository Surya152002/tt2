<!DOCTYPE html>
<html>
<head>
    <title>Bluetooth Data Sender</title>
</head>
<body>
    <button id="connectButton">Connect to Laptop</button>
    <button id="sendButton">Send Data</button>

    <script>
        let server = null;
        let port = null;

        async function connect() {
            try {
                server = await navigator.bluetooth.requestDevice({
                    acceptAllDevices: true,
                    optionalServices: ['serial_port']
                });

                port = await server.gatt.connect();
                document.getElementById("sendButton").disabled = false;
            } catch (error) {
                console.error("Error connecting to laptop:", error);
            }
        }

        async function sendData() {
            try {
                const message = "Hello, Laptop!";
                const encoder = new TextEncoder();
                await port.write(encoder.encode(message));
                console.log("Data sent:", message);
            } catch (error) {
                console.error("Error sending data:", error);
            }
        }

        document.getElementById("connectButton").addEventListener("click", connect);
        document.getElementById("sendButton").addEventListener("click", sendData);
    </script>
</body>
</html>
