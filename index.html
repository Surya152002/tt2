<!DOCTYPE html>
<html>
<head>
  <title>Mobile Sensor</title>
</head>
<body>
  <div id="message"></div>
  <p>Beta Sensor Value: <span id="sensorValue">Loading...</span></p>

  <script>
    const messageElement = document.getElementById('message');
    const sensorValueElement = document.getElementById('sensorValue');

    const ws = new WebSocket('ws://192.168.0.12:3000'); // Replace 'laptop-ip' with the laptop's IP address

    ws.onopen = () => {
      // Connection is open, display the "connected" message on the mobile screen
      messageElement.innerText = 'Connected to the server';
    };

    ws.onmessage = (event) => {
      const data = JSON.parse(event.data);
      if (data.type === 'displayMessage') {
        // Display the message received from the server
        messageElement.innerText = data.message;
      }
    };

    // Function to send sensor data to the server
    function sendSensorData(beta) {
      ws.send(JSON.stringify({ type: 'sensorData', beta }));
    }

    // Replace this part with your actual sensor data collection logic
    function collectSensorData() {
      // Simulate collecting the beta sensor value (replace with actual code)
      const betaValue = Math.random() * 180; // Replace with actual sensor data

      // Send the beta sensor value to the server
      sendSensorData(betaValue);

      // Display the beta sensor value on the mobile screen
      sensorValueElement.innerText = betaValue.toFixed(2);
    }

    // Call the data collection function at a desired interval
    setInterval(collectSensorData, 1000); // Adjust the interval as needed
  </script>
</body>
</html>
